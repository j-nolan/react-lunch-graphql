<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>reveal.js</title>

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/black.css">

        <!-- Theme used for syntax highlighting of code -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                  <h2>GraphQL and Apollo client</h2>
                  <img src="http://graphql.nodaljs.com/static/images/graphql_logo.png" style="height: 300px; border: 0">
                  <img src="https://pbs.twimg.com/profile_images/842844018606186496/HwAymj6H.jpg" style="height: 300px; border: 0">
                  <img src="https://pblackops.github.io/react/images/react.png" style="height: 300px; border: 0">
                  <p>ReactJS Lunch @ CHILI lab, EPFL</p>

                  <p>May 29th, 2017</p>
                </section>
                <section>
                  <h2>About myself</h2>
                  <ul>
                    <li>James Nolan</li>
                    <li>"Full stack" software engineer @ <a href="https://coteries.com/">coteries &bull; Lab</a></li>
                    <li>JavaScript, React</li>
                    <li>Twitter <a href="https://twitter.com/CoffeeHeadJim">@CoffeeHeadJim</a></li>
                    <li><a href="mailto:j.nolan@otherwise.ch">j.nolan@otherwise.ch</a></li>
                  </ul>
                </section>
                <section>
                    <h2>History</h2>
                      <section>
                        <ul>
                          <li>2012, Facebook redesigns app after HTML5 fiasco</li>
                          <li><strong>"What would an ideal API look like?"</strong></li>
                        </ul>
                        <aside class="notes">
                          <ul>
                            <li>in 2012 Facebook released its mobile app</li>
                            <li>the app was built in html5</li>
                            <li>bad response from user. Laggy feeling</li>
                            <li>they decided to completely redesign the app in the native environment</li>
                            <li>at the time, Facebook was a "simple" PHP website. Serverside rendered. Move fast, break things. Everybody could see new releases instantly. No need to have an API layer, no need for maintaining endpoints, They wanted to keep that speed</li>
                            <li>one of the main question that came up was "What would an ideal API look like?"</li>
                            <li>and they built graphql</li>
                            <li>conclusion: graphql was built for native apps by web developers</li>
                            <li>this may be graphql popularity in web apps today</li>
                          </ul>
                        </aside>
                    </section>
                    <section>
                      <ul>
                        <li>Since then, GraphQL powers the Android and iOS Facebook apps</li>
                        <li>300 billion+ requests per day at Facebook</li>
                        <li>2015, open sourced</li>
                      </ul>
                      <aside class="notes">
                        <ul>
                          <li>in 2012 Facebook released its mobile app</li>
                          <li>the app was built in html5</li>
                          <li>bad response from user. Laggy feeling</li>
                          <li>they decided to completely redesign the app in the native environment</li>
                          <li>at the time, Facebook was a "simple" PHP website. Serverside rendered. Move fast, break things. Everybody could see new releases instantly. No need to have an API layer, no need for maintaining endpoints, They wanted to keep that speed</li>
                          <li>one of the main question that came up was "What would an ideal API look like?"</li>
                          <li>and they built graphql</li>
                          <li>conclusion: graphql was built for native apps by web developers</li>
                          <li>this may be graphql popularity in web apps today</li>
                          <li>Since then, GraphQL powers the Android and iOS Facebook apps</li>
                          <li>300 billion+ requests per day at Facebook</li>
                          <li>This is the majority of requests</li>
                          <li>2015, GraphQL started being promoted by the React team at Facebook</li>
                          <li>Lee Byron Published <a href="https://code.facebook.com/posts/1691455094417024/graphql-a-data-query-language/">GraphQL, a data query language</a></li>
                        </ul>
                      </aside>
                  </section>
                </section>
                <section data-background-color="#ffffff">
                    <h2>Who uses it?</h2>
                    <section>
                        <img src="http://graphql.org/users/logos/20minutes.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/adayroi.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/allocine.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/alphasights.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/ants.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/appier.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/arangodb.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/artsy.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/attendify.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/bazinga.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/blenderbottle.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/brewerybuddy.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/bright.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/buildkite.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/clubmed.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/commercetools.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/coursera.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/creditkarma.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/curio.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/directlyrics.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/drift.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/duedil.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/eastview.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/easycarros.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/ediket.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/facebook.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/github.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/graphcms.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/graphcool.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/hijup.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/housinganywhere.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/hudl.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/icon-systems.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/idobata.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/indonesiax.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/inerva.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/intuit.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/leanix.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/legendsoflearning.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/lelivrescolaire.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/loggi.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/m1finance.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/make-school.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/meteor.png" style="width: 10%; border: 0; box-shadow: none">
                    </section>
                    <section>
                        <img src="http://graphql.org/users/logos/mixcloud.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/mojilala.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/newspring.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/ningensoft.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/nova-ideo.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/okgrow.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/ovos.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/persado.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/pinterest.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/product-hunt.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/project-september.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/prowl.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/quri.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/redbubble.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/reindex.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/restorando.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/salestock.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/scaphold.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/serverless.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/shopify.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/sky.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/skyarchnetworks.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/smarkets.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/startupsco.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/stem.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/swapcard.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/syzygy.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/taller.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/thehunt.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/trove.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/unigraph.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/ustglobal.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/vanilaio.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/waitlessq.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/waldo-photos.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/wayfair.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/whitescape.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/wirtualnapolska.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/wishlife.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/workflowgen.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/wowair.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/zlyde.png" style="width: 10%; border: 0; box-shadow: none">
                        <img src="http://graphql.org/users/logos/zzish.png" style="width: 10%; border: 0; box-shadow: none">
                    </section>
                </section>
                <section>
                    <h2>Does REST have a problem?</h2>
                </section>
                <section>
                    <section>
                        <h3>Overfetching</h3>
                        <img src="assets/trello.gif" style="float: left; max-width: 30%">
                        <div style="float: right; width: 60%">
                            <pre><code data-trim data-noescape>
                            ⟶ GET board/123/cards
                            ⟵ 200 OK [{
                              "content": "Move static assets to CDN",
                              "collaborators": [{...}],
                              "labels": [{...}, {...}],
                              "board": {...},
                              "checklists": [{...}, {...}],
                              "createdAt": {...},
                              "updatedAt": {...},
                              "expiresAt": {...},
                              "dueDate": {...},
                              "author": {...},
                              "attachments": [{...}, {...}],
                              "activity": [{...}, {...}],
                              "webhooks": [{...}, {...}],
                            ]}
                            </code></pre>
                        </div>
                    </section>
                    <section>
                        <h3>Extra roundtrips</h3>
                        <div style="float: left; width: 60%">
                            <pre><code data-trim data-noescape>
                            ⟶ GET board/123/cards
                            ⟵ 200 OK [{
                              "content": "Move static assets to CDN",
                              "collaboratorsIds": [1308]
                            ]}

                            ⟶ GET collaborator/1308
                            ⟵ 200 OK [{
                              "name": "Manu",
                              "avatar": "https://..."
                            ]}
                            </code></pre>
                        </div>
                        <img src="assets/trello.gif" style="float: right; max-width: 30%">
                    </section>
                    <section>
                        <h3>REST's solutions</h3>
                        <ul>
                          <li>Explicit fields</li>
                          <li>Subtrees</li>
                          <li>More endpoints</li>
                        </ul>
                    </section>
                    <section>
                        <pre><code data-trim data-noescape>
                        ⟶ GET board/123/cards?include=content,labels&amp;expand=collaborators
                        ⟵ 200 OK [{
                          "content": "Move static assets to CDN",
                          "labelsIds": [99, 101],
                          "collaborators": [{...}, {...}]
                        ]}
                        </code></pre>
                        <pre><code data-trim data-noescape>
                        ⟶ GET board/123/cards
                        ⟵ 200 OK [{
                          ...
                          "collaborators": [{
                            "name": "Manu",
                            "avatar": "https://...",
                            "type": "premium",
                            "cards": [...],
                          }],
                          ...
                        ]}
                        </code></pre>
                    </section>
                    <section>
                      <h3>Hard do get right</h3>
                      <ul>
                        <li>How to keep a reasonable number of endpoints?</li>
                        <li>How to enumerate fields in subtrees?</li>
                        <li>When is a subtree more relevant than a reference (ID)?</li>
                        <li>Should the backend developers maintain endpoints for each frontend view?</li>
                        <li><strong>Why would we let the server decide what data to return?</strong></li>
                      </ul>
                    </section>
                </section>

                <section>
                  <h2>What is GraphQL?</h2>
                  <section>
                    <img src="assets/graphql-example.jpg">
                  </section>
                  <section>
                    <ul>
                      <li>Defines a data shape</li>
                      <li>Hierarchical</li>
                      <li>Strongly typed</li>
                      <li>Protocol, not storage</li>
                      <li>Introspective</li>
                    </ul>
                    <aside class="notes">
                      <ul>
                        <li>Defines a data shape: The first thing you'll notice is that GraphQL queries mirror their response. This makes it easy to predict the shape of the data returned from a query, as well as to write a query if you know the data your app needs. More important, this makes GraphQL really easy to learn and use. GraphQL is unapologetically driven by the data requirements of products and of the designers and developers who build them.</li>
                        <li>Hierarchical: Another important aspect of GraphQL is its hierarchical nature. GraphQL naturally follows relationships between objects, where a RESTful service may require multiple round-trips (resource-intensive on mobile networks) or a complex join statement in SQL. This data hierarchy pairs well with graph-structured data stores and ultimately with the hierarchical user interfaces it's used within.</li>
                        <li>Strongly typed: Each level of a GraphQL query corresponds to a particular type, and each type describes a set of available fields. Similar to SQL, this allows GraphQL to provide descriptive error messages before executing a query.</li>
                        <li>Protocol, not storage: Each GraphQL field on the server is backed by any arbitrary function. While we were building GraphQL to support News Feed, we already had a sophisticated feed ranking and storage model, along with existing databases and business logic. GraphQL had to leverage all this existing work to be useful, and so does not dictate or provide any backing storage. Instead, GraphQL takes advantage of your existing code.</li>
                        <li>Introspective: A GraphQL server can be queried for the types it supports. This creates a powerful platform for tools and client software to build atop this information like code generation in statically typed languages, our application framework, Relay, or IDEs like GraphiQL (pictured below). GraphiQL helps developers learn and explore an API quickly without grepping the codebase or wrangling with cURL.</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                      <ul>
                        <li>Lets clients specify their own <strong>data needs</strong></li>
                        <li>Lets the server expose its own <strong>capabilities</strong></li>
                      </ul>
                  </section>
                </section>

                <section>
                    <section>
                      <h2>Queries</h2>
                    </section>
                    <section>
                      <pre><code data-trim data-noescape>
                      query {
                        tweets {
                          content
                          likes
                        }
                      }
                      </code></pre>
                      <pre><code data-trim data-noescape>
                      {"tweets": [
                        {
                          "content": "Something old, something new,
                            something model, something view",
                          "likes": 241
                        }, {
                          "content": "Learn from my history, _mes enfants_!
                            When designing something, esp. in a hurry,
                            resist requests for \"loose\" or \"easy to use\"
                            enhancements",
                          "likes": 49
                        }, {
                          "content": "Protip: `cd -` and `git checkout -`
                            return you to where you were last",
                          "likes": 866
                        }
                      ]}
                      </code></pre>
                    </section>
                    <section>
                      <pre><code data-trim data-noescape>
                      query {
                        tweets(limit: 1) {
                          content
                          likes
                        }
                      }
                      </code></pre>
                      <pre><code data-trim data-noescape>
                      {
                        "tweets": [
                          {
                            "content": "Something old, something new,
                              something model, something view",
                            "likes": 241
                          }
                        ]
                      }
                      </code></pre>
                    </section>
                    <section>
                      <pre><code data-trim data-noescape>
                      query {
                        tweets(limit: 1) {
                          content
                          likes
                          author {
                            name
                          }
                        }
                      }
                      </code></pre>
                      <pre><code data-trim data-noescape>
                      {
                        "tweets": [
                          {
                            "content": "Something old, something new,
                              something model, something view",
                            "likes": 241,
                            "author": {
                              "name": "Dan Abramov"
                            }
                          }
                        ]
                      }
                      </code></pre>
                    </section>
                    <section>
                      <pre><code data-trim data-noescape>
                      query {
                        tweets(limit: 1) {
                          content
                          likes
                          author {
                            name
                            followers {
                              name
                              tweets {
                                content
                              }
                            }
                          }
                        }
                      }
                      </code></pre>
                    </section>
                    <section>
                      <pre><code data-trim data-noescape>
                      {
                        "tweets": [
                          {
                            "content": "Something old, something new, something model, something view",
                            "likes": 241,
                            "author": {
                              "name": "Dan Abramov",
                              "followers": [
                                {
                                  "name": "James Nolan",
                                  "tweets": []
                                },
                                {
                                  "name": "Brendan Eich",
                                  "tweets": [
                                    {
                                      "content": "Learn from my history, _mes enfants_! When designing something, esp. in a hurry, resist requests for \"loose\" or \"easy to use\" enhancements"
                                    }
                                  ]
                                },
                                {
                                  "name": "Paul Irish",
                                  "tweets": [
                                    {
                                      "content": "Protip: `cd -` and `git checkout -` return you to where you were last"
                                    }
                                  ]
                                }
                              ]
                            }
                          }
                        ]
                      }
                      </code></pre>
                    </section>
                </section>

                <section>
                    <section>
                      <h2>Mutations</h2>
                    </section>
                    <section>
                      <pre><code data-trim data-noescape>
                      tweets(limit: 1) {
                        id
                        content
                        likes
                      }
                      </code></pre>
                      <pre><code data-trim data-noescape>
                      {
                          "tweets": [
                          {
                            "id": "1",
                            "content": "Something old, something new,
                              something model, something view",
                            "likes": 256
                          }
                        ]
                      }
                      </code></pre>
                    </section>
                    <section>
                      <pre><code data-trim data-noescape>
                      mutation {
                        likeTweet(id: 1) {
                          likes
                        }
                      }
                      </code></pre>
                      <pre><code data-trim data-noescape>
                      {
                        "likeTweet": {
                          "likes": 256
                        }
                      }
                      </code></pre>
                    </section>

                  </section>
                <section>
                  <h2>Sources</h2>
                  <ul>
                    <li><a href="https://www.youtube.com/watch?v=MGHwJ-dH2Os">Strong typing from the server to the UI with GraphQL</a>, Martijn Walraven @ UIKonf 2017</li>
                    <li><a href="http://graphql.org/users/">Who's using GraphQL?</a></li>
                    <li><a href="https://code.facebook.com/posts/1691455094417024/graphql-a-data-query-language/">GraphQL, a data query language</a>, Lee Byron</li>
                  </ul>
                </section>
            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            // More info about config & dependencies:
            // - https://github.com/hakimel/reveal.js#configuration
            // - https://github.com/hakimel/reveal.js#dependencies
            Reveal.initialize({
                dependencies: [
                    { src: 'plugin/markdown/marked.js' },
                    { src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                ]
            });
        </script>
    </body>
</html>
